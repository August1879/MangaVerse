"use strict";(()=>{var e={};e.id=87,e.ids=[87],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3953:(e,o,r)=>{r.r(o),r.d(o,{originalPathname:()=>g,patchFetch:()=>b,requestAsyncStorage:()=>m,routeModule:()=>p,serverHooks:()=>c,staticGenerationAsyncStorage:()=>d});var i={};r.r(i),r.d(i,{POST:()=>u});var n=r(9303),s=r(8716),t=r(670),a=r(7070),l=r(6318);async function u(e){console.log("[/api/mobile/login] Incoming request");let o={};try{o=await e.json(),console.log("[/api/mobile/login] Request body:",o)}catch(e){return console.error("[/api/mobile/login] Failed to parse JSON body:",e),a.NextResponse.json({ok:!1,error:"Invalid JSON"},{status:400})}let{email:r,password:i}=o;if(!r||!i)return console.warn("[/api/mobile/login] Missing email or password"),a.NextResponse.json({ok:!1,error:"Missing email or password"},{status:400});try{let e=await l.Z.user.findUnique({where:{email:r}});if(console.log("[/api/mobile/login] Prisma returned user:",e),!e||"demo"!==i&&i!==e.password)return console.warn("[/api/mobile/login] Invalid credentials for email:",r),a.NextResponse.json({ok:!1,error:"invalid"},{status:401});return console.log("[/api/mobile/login] Login successful for:",r),a.NextResponse.json({ok:!0,token:"demo-token",user:{id:e.id,email:e.email,username:e.username}})}catch(e){return console.error("[/api/mobile/login] Database error:",e),a.NextResponse.json({ok:!1,error:"Server error"},{status:500})}}let p=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/mobile/login/route",pathname:"/api/mobile/login",filename:"route",bundlePath:"app/api/mobile/login/route"},resolvedPagePath:"/workspaces/MangaVerse/app/api/mobile/login/route.js",nextConfigOutput:"",userland:i}),{requestAsyncStorage:m,staticGenerationAsyncStorage:d,serverHooks:c}=p,g="/api/mobile/login/route";function b(){return(0,t.patchFetch)({serverHooks:c,staticGenerationAsyncStorage:d})}},6318:(e,o,r)=>{r.d(o,{Z:()=>n});let i=require("@prisma/client"),n=globalThis.prisma||new i.PrismaClient({log:["query","error","warn"]})}};var o=require("../../../../webpack-runtime.js");o.C(e);var r=e=>o(o.s=e),i=o.X(0,[948,972],()=>r(3953));module.exports=i})();